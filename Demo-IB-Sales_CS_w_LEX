{"Version":"2019-10-30","StartAction":"34917c77-912d-42aa-9caf-815786face7e","Metadata":{"entryPointPosition":{"x":40,"y":40},"ActionMetadata":{"f5ceb93e-3c2b-4710-858e-459f5e964ed3":{"position":{"x":2632.8,"y":513.6}},"334bc811-17e6-42c6-b986-5b79cf72a5db":{"position":{"x":2888,"y":511.2}},"51e90069-97ce-4bc9-899a-f52f429c281d":{"position":{"x":2730.4,"y":268.8}},"badc56b4-ac2b-469c-ad92-5c8f0dc828b9":{"position":{"x":1660,"y":512.8}},"29a76a6d-cc4b-4c5d-a1ee-19b96143626e":{"position":{"x":3574.4,"y":380}},"bbb064bb-b6ce-4d7a-a82e-ecd86d127a83":{"position":{"x":2986.4,"y":308.8}},"21ca6c5b-6075-4128-8194-a6e377913b49":{"position":{"x":3266.4,"y":287.2}},"15dd3c7b-02f2-4588-8aa4-e8247b989153":{"position":{"x":158.4,"y":240}},"34917c77-912d-42aa-9caf-815786face7e":{"position":{"x":160.8,"y":60.8}},"ceb536b1-e877-4a7a-89b3-89e979e3a680":{"position":{"x":3235.2,"y":816.8}},"3b18408f-bc57-40a6-a035-a8c6f4ea8eed":{"position":{"x":159.2,"y":423.2},"overrideConsoleVoice":true},"3e459fcd-1903-4a75-a440-a23fece061a0":{"position":{"x":168.8,"y":613.6},"parameters":{"HoursOfOperationId":{"displayName":"Basic Hours"}},"Hours":{"id":"arn:aws:connect:us-east-1:071735315475:instance/62b3d897-7a40-4657-82f2-c5ec05acbab9/operating-hours/0a3039f1-f383-42e9-8426-e22f9223ab04","text":"Basic Hours"}},"0340916c-abca-44dc-837f-8a8d63daa408":{"position":{"x":1089.6,"y":673.6}},"Retry_02":{"position":{"x":872.8,"y":672.8},"isFriendlyName":true},"c9b71641-47bd-48fd-aff5-c262ddc9e6b1":{"position":{"x":561.6,"y":514.4}},"Retry_03":{"position":{"x":1976,"y":445.6},"isFriendlyName":true},"e87c5074-0dd6-4a17-8434-cc64d4ed1fec":{"position":{"x":2247.2,"y":440}},"Unstaffed_Callback":{"position":{"x":2042.4,"y":157.6},"isFriendlyName":true,"parameters":{"LexV2Bot":{"AliasArn":{"displayName":"callback_BOT","useLexBotDropdown":true,"lexV2BotName":"CallbackBot"}}},"dynamicMetadata":{"x-amz-lex:audio:end-timeout-ms:*:*":false,"x-amz-lex:dtmf:end-timeout-ms:*:*":false},"useLexBotDropdown":true,"lexV2BotName":"CallbackBot","lexV2BotAliasName":"callback_BOT","conditionMetadata":[{"id":"899d15ff-1c5b-4a72-8a96-efb95d77128b","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Callback"}]},"c49df6b5-80b0-4d27-9c4d-2cadb06ae349":{"position":{"x":3227.2,"y":72}},"Error Message":{"position":{"x":2883.2,"y":83.2},"isFriendlyName":true},"e2aa8513-1189-42bf-b58f-f169fbe8ad84":{"position":{"x":1780,"y":28.8}},"5b755f4d-b069-4146-ac4b-6919a228d21e":{"position":{"x":2532.8,"y":-38.4},"parameters":{"EventHooks":{"CustomerQueue":{"displayName":"Sample interruptible queue flow with callback"}}},"contactFlow":{"text":"Sample interruptible queue flow with callback","id":"arn:aws:connect:us-east-1:071735315475:instance/62b3d897-7a40-4657-82f2-c5ec05acbab9/contact-flow/b43b5e59-5867-4c49-99d7-269712f8000f"},"customerOrAgent":true},"81b74344-893d-41af-b405-0ccfc0c4b809":{"position":{"x":1958.4,"y":917.6}},"5da2456c-b8e1-47ef-8cc2-718bbd14c532":{"position":{"x":879.2,"y":430.4},"parameters":{"LexV2Bot":{"AliasArn":{"displayName":"callback_BOT","useLexBotDropdown":true,"lexV2BotName":"CallbackBot"}}},"dynamicMetadata":{"x-amz-lex:audio:end-timeout-ms:*:*":false,"x-amz-lex:dtmf:end-timeout-ms:*:*":false},"useLexBotDropdown":true,"lexV2BotName":"CallbackBot","lexV2BotAliasName":"callback_BOT","conditionMetadata":[{"id":"499f9ffd-b675-4978-82ae-b7613547fe50","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Callback"}]},"ca9d0780-11f5-42a5-875a-759b800a0713":{"position":{"x":2432.8,"y":180},"conditionMetadata":[],"countryCodePrefix":"+1"},"5773f3f9-b46f-4b87-b6ce-2418dd6a2665":{"position":{"x":1261.6,"y":431.2},"parameters":{"QueueId":{"displayName":"Customer Service"}},"queue":{"text":"Customer Service"}},"e5c394bc-2d4a-4f7b-91fb-f0006473c31a":{"position":{"x":1227.2,"y":208}},"Retry_01":{"position":{"x":983.2,"y":206.4},"isFriendlyName":true},"Welcome Prompt":{"position":{"x":721.6,"y":60},"isFriendlyName":true},"Customer Service":{"position":{"x":1469.6,"y":161.6},"isFriendlyName":true,"parameters":{"QueueId":{"displayName":"Customer Service"}},"queue":{"text":"Customer Service"}},"Sales":{"position":{"x":1466.4,"y":-39.2},"isFriendlyName":true,"parameters":{"QueueId":{"displayName":"Sales"}},"queue":{"text":"Sales"}},"Menu":{"position":{"x":1085.6,"y":-104.8},"isFriendlyName":true,"parameters":{"LexV2Bot":{"AliasArn":{"displayName":"Menu_Bot","useLexBotDropdown":true,"lexV2BotName":"MenuCSSales"}}},"dynamicMetadata":{"x-amz-lex:audio:end-timeout-ms:*:*":false,"x-amz-lex:dtmf:end-timeout-ms:*:*":false},"useLexBotDropdown":true,"lexV2BotName":"MenuCSSales","lexV2BotAliasName":"Menu_Bot","conditionMetadata":[{"id":"d90975c8-2fd1-4087-853e-ab75884cf88e","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Sales"},{"id":"c82d4948-6e5e-435f-80f0-e8f2612710fb","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"CustomerService"}]}},"Annotations":[],"name":"Demo-IB-Sales_CS_w_LEX","description":"","type":"contactFlow","status":"published","hash":{}},"Actions":[{"Parameters":{"LoopCount":"3"},"Identifier":"f5ceb93e-3c2b-4710-858e-459f5e964ed3","Type":"Loop","Transitions":{"NextAction":"ceb536b1-e877-4a7a-89b3-89e979e3a680","Conditions":[{"NextAction":"ca9d0780-11f5-42a5-875a-759b800a0713","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"ceb536b1-e877-4a7a-89b3-89e979e3a680","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"Text":"The number entered is invalid. Please try again."},"Identifier":"334bc811-17e6-42c6-b986-5b79cf72a5db","Type":"MessageParticipant","Transitions":{"NextAction":"f5ceb93e-3c2b-4710-858e-459f5e964ed3"}},{"Parameters":{"CallbackNumber":"$.StoredCustomerInput"},"Identifier":"51e90069-97ce-4bc9-899a-f52f429c281d","Type":"UpdateContactCallbackNumber","Transitions":{"NextAction":"bbb064bb-b6ce-4d7a-a82e-ecd86d127a83","Errors":[{"NextAction":"334bc811-17e6-42c6-b986-5b79cf72a5db","ErrorType":"InvalidCallbackNumber"},{"NextAction":"334bc811-17e6-42c6-b986-5b79cf72a5db","ErrorType":"CallbackNumberNotDialable"}]}},{"Parameters":{"SSML":"<speak>We are sorry we missed your call, Good Bye</speak>"},"Identifier":"badc56b4-ac2b-469c-ad92-5c8f0dc828b9","Type":"MessageParticipant","Transitions":{"NextAction":"29a76a6d-cc4b-4c5d-a1ee-19b96143626e","Errors":[{"NextAction":"29a76a6d-cc4b-4c5d-a1ee-19b96143626e","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"29a76a6d-cc4b-4c5d-a1ee-19b96143626e","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{"Text":"You will be called back when the next agent is available."},"Identifier":"bbb064bb-b6ce-4d7a-a82e-ecd86d127a83","Type":"MessageParticipant","Transitions":{"NextAction":"21ca6c5b-6075-4128-8194-a6e377913b49"}},{"Parameters":{"RetryDelaySeconds":"600","InitialCallDelaySeconds":"05","MaximumConnectionAttempts":"1"},"Identifier":"21ca6c5b-6075-4128-8194-a6e377913b49","Type":"CreateCallbackContact","Transitions":{"NextAction":"29a76a6d-cc4b-4c5d-a1ee-19b96143626e","Errors":[{"NextAction":"29a76a6d-cc4b-4c5d-a1ee-19b96143626e","ErrorType":"NoMatchingError"}]}},{"Parameters":{"RecordingBehavior":{"RecordedParticipants":[]}},"Identifier":"15dd3c7b-02f2-4588-8aa4-e8247b989153","Type":"UpdateContactRecordingBehavior","Transitions":{"NextAction":"3b18408f-bc57-40a6-a035-a8c6f4ea8eed"}},{"Parameters":{"FlowLoggingBehavior":"Disabled"},"Identifier":"34917c77-912d-42aa-9caf-815786face7e","Type":"UpdateFlowLoggingBehavior","Transitions":{"NextAction":"15dd3c7b-02f2-4588-8aa4-e8247b989153"}},{"Parameters":{"Text":"You will be called back when the next agent is available."},"Identifier":"ceb536b1-e877-4a7a-89b3-89e979e3a680","Type":"MessageParticipant","Transitions":{"NextAction":"29a76a6d-cc4b-4c5d-a1ee-19b96143626e"}},{"Parameters":{"TextToSpeechVoice":"Joanna","TextToSpeechEngine":"Neural","TextToSpeechStyle":"None"},"Identifier":"3b18408f-bc57-40a6-a035-a8c6f4ea8eed","Type":"UpdateContactTextToSpeechVoice","Transitions":{"NextAction":"3e459fcd-1903-4a75-a440-a23fece061a0"}},{"Parameters":{"HoursOfOperationId":"arn:aws:connect:us-east-1:071735315475:instance/62b3d897-7a40-4657-82f2-c5ec05acbab9/operating-hours/0a3039f1-f383-42e9-8426-e22f9223ab04"},"Identifier":"3e459fcd-1903-4a75-a440-a23fece061a0","Type":"CheckHoursOfOperation","Transitions":{"NextAction":"81b74344-893d-41af-b405-0ccfc0c4b809","Conditions":[{"NextAction":"Welcome Prompt","Condition":{"Operator":"Equals","Operands":["True"]}},{"NextAction":"c9b71641-47bd-48fd-aff5-c262ddc9e6b1","Condition":{"Operator":"Equals","Operands":["False"]}}],"Errors":[{"NextAction":"81b74344-893d-41af-b405-0ccfc0c4b809","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LoopCount":"3"},"Identifier":"0340916c-abca-44dc-837f-8a8d63daa408","Type":"Loop","Transitions":{"NextAction":"badc56b4-ac2b-469c-ad92-5c8f0dc828b9","Conditions":[{"NextAction":"Retry_02","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"badc56b4-ac2b-469c-ad92-5c8f0dc828b9","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"SSML":"<speak>I'm sorry I didn't get that. Let's try again.</speak>"},"Identifier":"Retry_02","Type":"MessageParticipant","Transitions":{"NextAction":"5da2456c-b8e1-47ef-8cc2-718bbd14c532","Errors":[{"NextAction":"ceb536b1-e877-4a7a-89b3-89e979e3a680","ErrorType":"NoMatchingError"}]}},{"Parameters":{"SSML":"<speak>Thank you for calling Unlimited Services. Your call is very important to us. Our office is currently closed. our normal business hours are Monday through Friday From 9 A.M. to 5 P.M. Local time.</speak>"},"Identifier":"c9b71641-47bd-48fd-aff5-c262ddc9e6b1","Type":"MessageParticipant","Transitions":{"NextAction":"5da2456c-b8e1-47ef-8cc2-718bbd14c532","Errors":[{"NextAction":"5da2456c-b8e1-47ef-8cc2-718bbd14c532","ErrorType":"NoMatchingError"}]}},{"Parameters":{"SSML":"<speak>I'm sorry I didn't get that. Let's try again.</speak>"},"Identifier":"Retry_03","Type":"MessageParticipant","Transitions":{"NextAction":"Unstaffed_Callback","Errors":[{"NextAction":"ceb536b1-e877-4a7a-89b3-89e979e3a680","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LoopCount":"3"},"Identifier":"e87c5074-0dd6-4a17-8434-cc64d4ed1fec","Type":"Loop","Transitions":{"NextAction":"ceb536b1-e877-4a7a-89b3-89e979e3a680","Conditions":[{"NextAction":"Retry_03","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"ceb536b1-e877-4a7a-89b3-89e979e3a680","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"SSML":"<speak>All of our team members are currently assisting other callers, we apologize for any inconvenience. If you would like to leave a call back number, press or say one, and the next available team member will contact you. Or you can try your call again at a later time. </speak>","LexV2Bot":{"AliasArn":"arn:aws:lex:us-east-1:071735315475:bot-alias/KCFPDG9C8C/B0GKQVGOMF"},"LexSessionAttributes":{"x-amz-lex:audio:end-timeout-ms:*:*":"2000","x-amz-lex:dtmf:end-timeout-ms:*:*":"2000"}},"Identifier":"Unstaffed_Callback","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"e87c5074-0dd6-4a17-8434-cc64d4ed1fec","Conditions":[{"NextAction":"ca9d0780-11f5-42a5-875a-759b800a0713","Condition":{"Operator":"Equals","Operands":["Callback"]}}],"Errors":[{"NextAction":"e87c5074-0dd6-4a17-8434-cc64d4ed1fec","ErrorType":"NoMatchingCondition"},{"NextAction":"e87c5074-0dd6-4a17-8434-cc64d4ed1fec","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"c49df6b5-80b0-4d27-9c4d-2cadb06ae349","Type":"TransferContactToQueue","Transitions":{"NextAction":"29a76a6d-cc4b-4c5d-a1ee-19b96143626e","Errors":[{"NextAction":"Unstaffed_Callback","ErrorType":"QueueAtCapacity"},{"NextAction":"29a76a6d-cc4b-4c5d-a1ee-19b96143626e","ErrorType":"NoMatchingError"}]}},{"Parameters":{"SSML":"<speak>I'm sorry we are having an issue processing this call, please try your call back again later. Thank you, good bye</speak>"},"Identifier":"Error Message","Type":"MessageParticipant","Transitions":{"NextAction":"29a76a6d-cc4b-4c5d-a1ee-19b96143626e","Errors":[{"NextAction":"29a76a6d-cc4b-4c5d-a1ee-19b96143626e","ErrorType":"NoMatchingError"}]}},{"Parameters":{"MetricType":"NumberOfAgentsStaffed"},"Identifier":"e2aa8513-1189-42bf-b58f-f169fbe8ad84","Type":"CheckMetricData","Transitions":{"NextAction":"Error Message","Conditions":[{"NextAction":"5b755f4d-b069-4146-ac4b-6919a228d21e","Condition":{"Operator":"NumberGreaterThan","Operands":["0"]}}],"Errors":[{"NextAction":"Unstaffed_Callback","ErrorType":"NoMatchingCondition"},{"NextAction":"Error Message","ErrorType":"NoMatchingError"}]}},{"Parameters":{"EventHooks":{"CustomerQueue":"arn:aws:connect:us-east-1:071735315475:instance/62b3d897-7a40-4657-82f2-c5ec05acbab9/contact-flow/b43b5e59-5867-4c49-99d7-269712f8000f"}},"Identifier":"5b755f4d-b069-4146-ac4b-6919a228d21e","Type":"UpdateContactEventHooks","Transitions":{"NextAction":"c49df6b5-80b0-4d27-9c4d-2cadb06ae349","Errors":[{"NextAction":"Error Message","ErrorType":"NoMatchingError"}]}},{"Parameters":{"SSML":"<speak>We are currently experiencing some technical difficulties, please try your call again later.</speak>"},"Identifier":"81b74344-893d-41af-b405-0ccfc0c4b809","Type":"MessageParticipant","Transitions":{"NextAction":"ceb536b1-e877-4a7a-89b3-89e979e3a680","Errors":[{"NextAction":"ceb536b1-e877-4a7a-89b3-89e979e3a680","ErrorType":"NoMatchingError"}]}},{"Parameters":{"SSML":"<speak>If you would like for a team member to call you back once we are open please press or say 1.</speak>","LexV2Bot":{"AliasArn":"arn:aws:lex:us-east-1:071735315475:bot-alias/KCFPDG9C8C/B0GKQVGOMF"},"LexSessionAttributes":{"x-amz-lex:audio:end-timeout-ms:*:*":"2000","x-amz-lex:dtmf:end-timeout-ms:*:*":"2000"}},"Identifier":"5da2456c-b8e1-47ef-8cc2-718bbd14c532","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"0340916c-abca-44dc-837f-8a8d63daa408","Conditions":[{"NextAction":"5773f3f9-b46f-4b87-b6ce-2418dd6a2665","Condition":{"Operator":"Equals","Operands":["Callback"]}}],"Errors":[{"NextAction":"0340916c-abca-44dc-837f-8a8d63daa408","ErrorType":"NoMatchingCondition"},{"NextAction":"0340916c-abca-44dc-837f-8a8d63daa408","ErrorType":"NoMatchingError"}]}},{"Parameters":{"StoreInput":"True","InputTimeLimitSeconds":"5","SSML":"<speak>Starting with the area code. Enter the ten digit number you would like to be called back at.</speak>","InputValidation":{"PhoneNumberValidation":{"NumberFormat":"Local","CountryCode":"US"}}},"Identifier":"ca9d0780-11f5-42a5-875a-759b800a0713","Type":"GetParticipantInput","Transitions":{"NextAction":"51e90069-97ce-4bc9-899a-f52f429c281d","Errors":[{"NextAction":"334bc811-17e6-42c6-b986-5b79cf72a5db","ErrorType":"NoMatchingError"},{"NextAction":"334bc811-17e6-42c6-b986-5b79cf72a5db","ErrorType":"InvalidPhoneNumber"}]}},{"Parameters":{"QueueId":"arn:aws:connect:us-east-1:071735315475:instance/62b3d897-7a40-4657-82f2-c5ec05acbab9/queue/ef593139-d834-4b4c-8897-0e5f130ee360"},"Identifier":"5773f3f9-b46f-4b87-b6ce-2418dd6a2665","Type":"UpdateContactTargetQueue","Transitions":{"NextAction":"ca9d0780-11f5-42a5-875a-759b800a0713","Errors":[{"NextAction":"81b74344-893d-41af-b405-0ccfc0c4b809","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LoopCount":"3"},"Identifier":"e5c394bc-2d4a-4f7b-91fb-f0006473c31a","Type":"Loop","Transitions":{"NextAction":"ceb536b1-e877-4a7a-89b3-89e979e3a680","Conditions":[{"NextAction":"Retry_01","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"ceb536b1-e877-4a7a-89b3-89e979e3a680","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"SSML":"<speak>I'm sorry I didn't get that. Let's try again.</speak>"},"Identifier":"Retry_01","Type":"MessageParticipant","Transitions":{"NextAction":"Menu","Errors":[{"NextAction":"ceb536b1-e877-4a7a-89b3-89e979e3a680","ErrorType":"NoMatchingError"}]}},{"Parameters":{"SSML":"<speak>Thank you for calling Unlimited Services. Your call is greatly appreciated. Please listen to the following options..</speak>"},"Identifier":"Welcome Prompt","Type":"MessageParticipant","Transitions":{"NextAction":"Menu","Errors":[{"NextAction":"Menu","ErrorType":"NoMatchingError"}]}},{"Parameters":{"QueueId":"arn:aws:connect:us-east-1:071735315475:instance/62b3d897-7a40-4657-82f2-c5ec05acbab9/queue/ef593139-d834-4b4c-8897-0e5f130ee360"},"Identifier":"Customer Service","Type":"UpdateContactTargetQueue","Transitions":{"NextAction":"e2aa8513-1189-42bf-b58f-f169fbe8ad84","Errors":[{"NextAction":"Error Message","ErrorType":"NoMatchingError"}]}},{"Parameters":{"QueueId":"arn:aws:connect:us-east-1:071735315475:instance/62b3d897-7a40-4657-82f2-c5ec05acbab9/queue/1ab9c5e0-7ae2-456f-8d03-014bf023f554"},"Identifier":"Sales","Type":"UpdateContactTargetQueue","Transitions":{"NextAction":"e2aa8513-1189-42bf-b58f-f169fbe8ad84","Errors":[{"NextAction":"Error Message","ErrorType":"NoMatchingError"}]}},{"Parameters":{"SSML":"<speak>To Speak with a sales associate. Say sales, or you can  please press or say 1. For questions on a current service request, or to create a new request you can say Customer Service, or you can also  press or say 2.</speak>","LexV2Bot":{"AliasArn":"arn:aws:lex:us-east-1:071735315475:bot-alias/BXSGLUKTQO/JFFGPAQF8T"},"LexSessionAttributes":{"x-amz-lex:audio:end-timeout-ms:*:*":"2000","x-amz-lex:dtmf:end-timeout-ms:*:*":"2000"}},"Identifier":"Menu","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"e5c394bc-2d4a-4f7b-91fb-f0006473c31a","Conditions":[{"NextAction":"Sales","Condition":{"Operator":"Equals","Operands":["Sales"]}},{"NextAction":"Customer Service","Condition":{"Operator":"Equals","Operands":["CustomerService"]}}],"Errors":[{"NextAction":"e5c394bc-2d4a-4f7b-91fb-f0006473c31a","ErrorType":"NoMatchingCondition"},{"NextAction":"e5c394bc-2d4a-4f7b-91fb-f0006473c31a","ErrorType":"NoMatchingError"}]}}]}